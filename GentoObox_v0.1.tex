\documentclass[10pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{amsmath, amsfonts, amssymb, graphicx, braket, multicol, enumitem, pdfpages, fancyhdr, hyperref, xcolor, listings}
\usepackage[export]{adjustbox}
\usepackage[width=17.00cm, height=24.00cm]{geometry}

\lstdefinestyle{BashInputRoot}{
	backgroundcolor=\color{black},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}; should come as last argument
	basicstyle=\ttfamily\color{white},        % the size of the fonts that are used for the code
%	breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
%	breaklines=false,                 % sets automatic line breaking
%	captionpos=b,                    % sets the caption-position to bottom
%	commentstyle=\color{mygreen},    % comment style
%	deletekeywords={chroot},            % if you want to delete keywords from the given language
%	escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
%	extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
%	frame=single,	                   % adds a frame around the code
%	keepspaces=false,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
%	keywordstyle=\color{white},       % keyword style
	language=Bash,                 % the language of the code
%	morekeywords={},           % if you want to add more keywords to the set
%	alsoletter= {root \# },
	literate={root\#}{{\textcolor{red}{root \#}}}7,
%	numbers=left,                    % where to put the line-numbers; possible values are (none, left, right)
%	numbersep=5pt,                   % how far the line-numbers are from the code
%	numberstyle=\tiny\color{mygray}, % the style that is used for the line-numbers
%	rulecolor=\color{black},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
%	showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
%	showstringspaces=false,          % underline spaces within strings only
%	showtabs=false,                  % show tabs within strings adding particular underscores
%	stepnumber=2,                    % the step between two line-numbers. If it's 1, each line will be numbered
%	stringstyle=\color{mymauve},     % string literal style
%	tabsize=2,	                   % sets default tabsize to 2 spaces
%	title=\lstname                   % show the filename of files included with \lstinputlisting; also try caption instead of title
    linewidth=\linewidth,
    breaklines=true	
}

\lstdefinestyle{BashInputCHRoot}{
	backgroundcolor=\color{black},
	basicstyle=\ttfamily\color{white}, 
	language=Bash,                 
	literate={CHroot\#}{{\textcolor{red}{CHroot \#}}}7,
    linewidth=\linewidth,
    breaklines=true
}

\lstdefinestyle{BashInputUser}{
	backgroundcolor=\color{black},
	basicstyle=\ttfamily\color{white},
	language=Bash,                
	literate={user\$}{{\textcolor{green}{user \$}}}7,
	linewidth=\linewidth,
    breaklines=true
}

\lstdefinestyle{KernelConfig}{
	backgroundcolor=\color{lightgray},
	basicstyle=\ttfamily\color{black},
	linewidth=\linewidth,
    breaklines=true
}

\definecolor{eclipseBlue}{RGB}{42,0.0,255}
\lstdefinelanguage{LinuxConfigFiles}{
	backgroundcolor=\color{yellow!30},
	basicstyle=\ttfamily,
	tabsize=2,
	numbers=left,
	numberstyle=\tiny\color{black!50},
	title=\lstname,
	linewidth=\linewidth,
	breaklines=true,
	commentstyle=\color{eclipseBlue},
	morecomment=[l]{\#}
}

\title{
    GentoObox \\
    \large simple manual for minimalistic Gentoo installation with Openbox environment 
}

\begin{document}
	\pagestyle{fancy}
    
    \maketitle
    \newpage
    
    \tableofcontents

    \newpage        
    \section{Introduction}
    
        \paragraph{} Thanks to my father, I am an Gentoo user since high school. Although 10 years have passed from my first installation, there is little difference with my last. I always go to the Gentoo handbook, always google additional information, always have new ideas to achieve, and always spend a week or two configuring the system to suit my needs. I cannot say that my needs are so special - I need a browser, video player, unified look and feel in the GUI, little programming tools. I like when things work as smooth and fast as possible, and of course as reliable as possible. 
        
        \paragraph{} My initial choice of environment was Gnome2, but after the changes introduced in Gnome3 I was on a crossroad. I never liked how KDE looks and feels, so the next logical choice was Xfce. It truly was fast and easy to use, but somehow did not feel right and my search continued. Governed by the idea that everything should be as fast and light as possible I started experimenting with windows managers. From all of the ones out there Openbox got my heart. 
        
        \paragraph{} Of course choosing to use window manager has its benefits and drawbacks. The pros are small dependencies, lightweight, fast, reliability, freedom to choose what you want to use. The cons are how much work and effort you have to put into building your system, but isn't this the Gentoo way after all?
        
        \paragraph{} Unfortunately there are not many guides how to build your system. Some honourable mentions are \href{https://urukrama.wordpress.com/openbox-guide/}{Urukrama openbox guide}, \href{https://wiki.gentoo.org/wiki/Openbox}{Gentoo Openbox Wiki}, \href{https://wiki.archlinux.org/index.php/openbox}{Arch Openbox Wiki}, but they do not contain all the answers. For example it took me embarrassingly long time to understand what is a dock, example plank, system tray and how they do not mix in all cases. Or how to create dual head configuration using ZaphodHeads method in xorg. This document is dedicated to all of those problems I faced and put numerous hours to resolve.
    
        \newpage
    \section{Basic Gentoo installation}
    
        \subsection{Preparing the disks}
        
            \paragraph{} This section is dedicated on the basic Gentoo installation. It follows for the most part \href{https://wiki.gentoo.org/wiki/Handbook:AMD64}{Gentoo AMD64 Handbook} and will include additional details.
            
            \paragraph{} I usually use some live distro for the installation and initial configuration, and thus presume this position for the rest of the text. Without further ado the first step, of course is \href{https://wiki.gentoo.org/wiki/Handbook:AMD64/Installation/Disks}{preparing the disk}. For the moment I have not met any need for GPT or UEFI and continue using MRB with BIOS. Almost all of the live distros I have encountered include \textit{Gparted}, so I use it for the partitionin.
            
            \newpage
            \subsubsection{ MBR with BIOS }
                
                \paragraph{} Using \textit{Gparted}\begin{enumerate}
                    \item you have chosen the correct device, \textit{/dev/sdb}\footnote{ I am presuming we are working from live usb distro, so usually \textbf{/dev/sda} is the usb drive, and \textbf{/dev/sdb} is the disk we are working on.}
                    \item go to \textit{Device -> Create Partition table} and make sure it is \textbf{MBR}
                \end{enumerate}
                
                \paragraph{} For all of my purposes I need no more than $ 150 \mbox{ GB}$ so sufficient configuration for me is something like: \begin{itemize}
                    \item \textbf{swap} - swap - as much as the physical RAM on the machine 
                    \item \textbf{boot partition} - ext4 - $ 512 \mbox{ MB} $  - boot partition, for historical reasons and \href{https://superuser.com/questions/522971/is-a-boot-partition-always-necessary}{structural benefits}, I have found article which discusses the differences between /boot, bootloader partition in greater detail, but at the time of writing I did not manage to find it again
                    \item \textbf{root partition} - ext4 - $ 60 \mbox{ GB} $ - the partition for root /
                    \item \textbf{home partition} - ext4 - $ 120 \mbox{ GB} $ - the partition for /home, reasons see above link
                \end{itemize}
            
                \paragraph{} After the partitioning is done the live distro usually automaticly activates the swap, but if necessary you can do it by hand with.

\begin{lstlisting}[style=BashInputRoot]
root# swapon /dev/sdb{swap partition number}
\end{lstlisting}

        \newpage
        \subsection{Installing a stage tarball}
            \paragraph{} Now lets mount the root partition.

\begin{lstlisting}[style=BashInputRoot]
root# mkdir /mnt/gentoo && \
      mount /dev/sdb{root partition number} /mnt/gentoo 
\end{lstlisting}
                
            \paragraph{} Make sure the date is correct

\begin{lstlisting}[style=BashInputRoot]
root# date
 Sun Sep 24 10:58:24 EEST 2017
\end{lstlisting}
            
            \paragraph{} If it is not, set it using the format \textit{MMDDhhmmYYYY}, so to set it as the above

\begin{lstlisting}[style=BashInputRoot]
root# date 092410582017 && date
 Sun Sep 24 10:58:24 EEST 2017
\end{lstlisting}
            
            \paragraph{} Navigate to \href{https://www.gentoo.org/downloads/}{Gentoo download section} and choose \textbf{Stage 3} for your architecture, mine is \textit{amd64}, and place the tarball in \textbf{/mnt/gentoo}, and unpack it
            
\begin{lstlisting}[style=BashInputRoot]
root# cd /mnt/gentoo && \
 curl -O http://distfiles.gentoo.org/releases/amd64/{path to file} && \
 tar xvjpf stage3-*.tar.bz2 --xattrs --numeric-owner 
\end{lstlisting}

        \newpage
        \subsection{Initial Gentoo configuring}
        
            \subsubsection{Pre requires}
        
                \paragraph{} Now we will \textbf{chroot} into \textit{/mnt/gentoo} and configure everything within there. For this to happen we need to
                \begin{enumerate}
                    \item copy dns info
                    \item mount our partitions
                    \item mount the necessary filesystems 
                \end{enumerate}
                
                \begin{enumerate}
                    
                    \newpage
                    \item to ensure that networking still works even after entering the new environment. This is done by

\begin{lstlisting}[style=BashInputRoot]
root# cp -L /etc/resolv.conf /mnt/gentoo/etc/
\end{lstlisting}
                    
                    \newpage
                    \item mount our partitions
                    
                    \paragraph{} Firstly lets mount them

\begin{lstlisting}[style=BashInputRoot]  
root# mount /dev/sdb{boot partition number} /mnt/gentoo/boot
root# mount /dev/sdb{home partition number} /mnt/gentoo/home
\end{lstlisting}
                    
                    \paragraph{} Lets add them to \textbf{/etc/fstab}, which should look something like this
                    
\lstinputlisting[linerange={30-34}, firstnumber=30, language=LinuxConfigFiles]{sample_configs/fstab_example}
                    
                    \paragraph{} Quick reference by field, for more details \href{http://www.coolcoder.in/2013/12/linux-fstab-file-explained.html}{for example see here} or \href{https://wiki.archlinux.org/index.php/fstab}{here} 
                    \begin{enumerate}[label=(\arabic*)] 
                        \item device/partition, can be specified with label, network id, device path
                        \item mount point
                        \item filesystem type
                        \item mount options, some of the used are: \begin{itemize}
                            \item defaults: Uses the default options that are rw, suid, dev, exec, auto, nouser, and async
                            \item noatime: fully disables writing file access times to the drive every time you read a file. This works well for almost all applications, except for those that need to know if a file has been read since the last time it was modified.
                            \item auto: noauto  
                        \end{itemize}                        
                        \item dump field: single digit, sets whether the backup utility dump will backup filesystem, set to $ 0 $ to ignore or $ 1 $ to back up
                        \item pass field: single digit, \textbf{fsck} order to check the filesystem at boot \begin{itemize}
                            \item $ 0 $ means do not check recommended for network shares
                            \item $ 1 $ check this partition first, highly recommended \underline{only for root partition}
                            \item $ 2 $ check this partition next, all partitions marked with it are checked in sequence and we do not need to specify an order
                        \end{itemize}
                    \end{enumerate}
                    
                    \newpage
                    \item mount the necessary filesystems, again I presume using non-Gentoo installation media
\begin{lstlisting}[style=BashInputRoot]
 root# mount -t proc /proc /mnt/gentoo/proc 
 root# mount --rbind /sys /mnt/gentoo/sys 
 root# mount --make-rslave /mnt/gentoo/sys
 root# mount --rbind /dev /mnt/gentoo/dev 
 root# mount --make-rslave /mnt/gentoo/dev 
 root# test -L /dev/shm && rm /dev/shm && mkdir /dev/shm 
 root# mount -t tmpfs -o nosuid,nodev,noexec shm /dev/shm
 root# chmod 1777 /dev/shm
\end{lstlisting}
                    
                \end{enumerate}
            
            \newpage
            \subsubsection{Chroot at /mnt/gentoo}
                
                \paragraph{} We need to enter the new installation environment by chrooting into it:
\begin{lstlisting}[style=BashInputRoot]
root# chroot /mnt/gentoo /bin/bash
root# source /etc/profile
root# export PS1="CH${PS1}"
\end{lstlisting}
                
                \paragraph{} Which should result into following line, thus we will recognize if we are at the live medium or into the changed root of Gentoo.
\begin{lstlisting}[style=BashInputCHRoot]
 CHroot#
\end{lstlisting}
    
         \newpage
        \subsection{Configure portage}
            
            \subsubsection{Repository}
            
                \paragraph{} First we need to configure the repository, if it does not exist.  

\begin{lstlisting}[style=BashInputCHRoot]
 CHroot# mkdir -p /etc/portage/repos.conf
 CHroot# touch /etc/portage/repos.conf/gentoo.conf && nano /etc/portage/repos.conf/gentoo.conf
\end{lstlisting}

                \paragraph{} It should look like this:
            
\lstinputlisting[language=LinuxConfigFiles]{sample_configs/gentoo.conf_example}
            
                \paragraph{} Now lets fetch the latest snapshot, up to the last hour. The command might complain about some missing locations, but it is safe to ignore.

\begin{lstlisting}[style=BashInputCHRoot]
 CHroot# emerge-webrsync && emerge --sync
\end{lstlisting}
               
           \newpage
            \subsubsection{Profile selection}
            
                \paragraph{} Now lets choose our profile, each one comes with predefined use flags \href{https://wiki.gentoo.org/wiki/Handbook:PPC/Working/USE}{(if you are not sure come here)}
            
\begin{lstlisting}[style=BashInputCHRoot]
 CHroot# eselect profile list
 Available profile symlink targets:
 [1]   default/linux/amd64/13.0
 [2]   default/linux/amd64/13.0/selinux
 [3]   default/linux/amd64/13.0/desktop
 [4]   default/linux/amd64/13.0/desktop/gnome
 [5]   default/linux/amd64/13.0/desktop/gnome/systemd
 [6]   default/linux/amd64/13.0/desktop/plasma
 [7]   default/linux/amd64/13.0/desktop/plasma/systemd
 [8]   default/linux/amd64/13.0/developer
 [9]   default/linux/amd64/13.0/no-multilib
 [10]  default/linux/amd64/13.0/systemd
 [11]  default/linux/amd64/13.0/x32
 [12]  hardened/linux/amd64
 [13]  hardened/linux/amd64/selinux
 [14]  hardened/linux/amd64/no-multilib
 [15]  hardened/linux/amd64/no-multilib/selinux
 [16]  hardened/linux/amd64/x32
 [17]  hardened/linux/musl/amd64
 [18]  hardened/linux/musl/amd64/x32
 [19]  default/linux/uclibc/amd64
 [20]  hardened/linux/uclibc/amd64
\end{lstlisting}
        
            \paragraph{} For my purposes I need \textit{default/linux/amd64/13.0/desktop}

\begin{lstlisting}[style=BashInputCHRoot]
 CHroot# eselect profile set 3
\end{lstlisting}
        
        \newpage

            \subsubsection{/etc/portage/make.conf}
        
                \paragraph{} The \textbf{/etc/portage/make.conf} is used to define settings and options applied to every package that is emerged. In the following lines I will explain in detail my configs. \href{https://wiki.gentoo.org/wiki//etc/portage/make.conf}{More details click here}
                
                \begin{itemize}
                    \item \textbf{CFLAGS}, \textbf{CXXFLAGS} are variables who define the build and compile flags that will be used for all package deployments. CFLAGS are for C based applications, CXXFLAGS are for C++ based ones.
    
\lstinputlisting[linerange={6-7}, firstnumber=6, language=LinuxConfigFiles]{sample_configs/make.conf_example}
    
                    \begin{itemize}[label={o}]
    
                        \item \textbf{-march=native} option: If the type of CPU is undetermined, or if the user does not know what setting to choose, it is possible use the \textit{-march=native} settings. When this flag is used, GCC will attempt to detect the processor and automatically set appropriate flags for it. \textit{This should not be used when intending to compile packages for different CPUs!}\\
                        You can find the kind of CPU you have by using
    \begin{lstlisting}[style=BashInputUser]					
    user$ cat /proc/cpuinfo					
    \end{lstlisting}
                        
                        If you are interested in what flags a specific option, lets say \textbf{core2}, will activate check by
    \begin{lstlisting}[style=BashInputUser]
    user$ gcc -c -Q -march=core2 --help=target
    \end{lstlisting}
                        
                        If you are interested how the flags of different options will differ check with:
    \begin{lstlisting}[style=BashInputUser]
    user$ diff \
                <(gcc -march=native -Q --help=target) \
                <(gcc -march=core2 -Q --help=target)
    \end{lstlisting}
                        
                        \item \textbf{-O2} option: This variable controls the overall level of optimization. $ \mbox{-O}0 $ will turn it off, $ \mbox{-O}1 $ will do most basic. $ \mbox{-O}2 $ is a step up from $ \mbox{-O}1 $ and the recommended level. $ \mbox{-O}3 $ is the highest level, but does not guarantee to improve performance and in some cases can slow down system due to large binaries and increased memory usage.
                        
                        \item \textbf{-pipe} option: Is a common flag which makes compilation process much faster.
                        
                    \end{itemize}
                
                    \item \textbf{CHOST} variable is passed through the configure step of ebuilds to set the build-host of the system. Note that the Gentoo profile already sets the appropriate CHOST value, and updating it requires insight and experience in build chains. 
                    
\lstinputlisting[linerange={12-12}, firstnumber=12, language=LinuxConfigFiles]{sample_configs/make.conf_example}
                    
                    \item \textbf{ACCEPT\_KEYWORDS} defines globally, for all packages, on one hand the architecture, in our case it is \textbf{amd64}, since we have x86\_64, but it could have been \textbf{arm}; and if we are to use stable or unstable \textbf{$ \sim $} packages. In our case we want only stable packages for x86\_64. \href{https://wiki.gentoo.org/wiki/ACCEPT_KEYWORDS}{more detail on accept\_keywords}
                    
\lstinputlisting[linerange={17-17}, firstnumber=17, language=LinuxConfigFiles]{sample_configs/make.conf_example}
    
                    \item \textbf{MAKEOPTS} specify arguments passed to \textit{make} when packages are built from source. \href{https://wiki.gentoo.org/wiki/MAKEOPTS}{More info here}
                    \footnote{ \label{jobs-load-ref1} \href{https://lists.gt.net/gentoo/user/269934}{more detail on load average link1}}
                    \footnote{\label{jobs-load-ref2} \href{http://blog.scoutapp.com/articles/2009/07/31/understanding-load-averages}{more detail on load average link2}}
                    \footnote{\label{jobs-load-ref3} \href{https://blogs.gentoo.org/ago/2013/01/14/makeopts-jcore-1-is-not-the-best-optimization/}{more detail on load average link3}}
                    \footnote{\label{jobs-load-ref4} \href{https://www.preney.ca/paul/archives/341}{more detail on load average link4}}
                    
\lstinputlisting[linerange={19-19}, firstnumber=19, language=LinuxConfigFiles]{sample_configs/make.conf_example}
                    
                    \begin{itemize}[label={o}]
                        
                        \item \textbf{--jobs=4} defines how many parallel sessions to trigger, if they are possible. The recommended value is the number of logical processors in the CPU. You can obtain that number with the following command
                        
    \begin{lstlisting}[style=BashInputUser]
    user$ nproc --all
    \end{lstlisting}
                        
                        \item \textbf{--load-average=3.8} option: This option prevents starting new installations if the load-average is more than $ 3.8 $. It is recommend your load-average to be as much as the number of logical CPU.
                        
                    \end{itemize}     
                    
                    \item \textbf{EMERGE\_DEFAULT\_OPTS} specify arguments passed to \textit{emerge}. \href{https://wiki.gentoo.org/wiki/EMERGE_DEFAULT_OPTS}{More info here} See previous footnotes for details on load average and parallelism. 
                    \footnote{ See footnote \ref{jobs-load-ref1}}
                    \footnote{ See footnote \ref{jobs-load-ref2}}
                    \footnote{ See footnote \ref{jobs-load-ref3}}
                    \footnote{ See footnote \ref{jobs-load-ref4}} 
    
\lstinputlisting[linerange={20-20}, firstnumber=20, language=LinuxConfigFiles]{sample_configs/make.conf_example}
                
                    \begin{itemize}[label={o}]
                        \item \textbf{--jobs=4} sets the amount of parallel packages to emerge. Note that if you have set \textbf{makeopts -j N} and \textbf{emerge\_default\_opts -j K} you will end up with $ N*K $ tasks! The recommended value is the number of logical processors in the CPU.
                        
                        \item \textbf{--load-average=3.8} prevents starting new instance of emerge if the load-average is more than $ 3.8 $. Rule of thumb is set it as much as the number of logical CPU.
                        
                        \item \textbf{--with-bdeps y} option: By default, the dependency graph may not include some packages. If you would like to include such build time dependencies even though they are not strictly required. \href{https://wiki.gentoo.org/wiki/Project:Portage/FAQ\#Why_is_it_that_emerge_does_not_update_all_packages.3F}{more detail on emerge\_default\_opts with-bdeps option}
                        
                        \item \textbf{--quiet-build y} option: Redirect all build output to logs alone, and do not display it on stdout. If a build failure occurs for a single package, the build log will be automatically displayed on stdout (unless the --quiet-fail option is enabled)
                        
                        \item \textbf{--keep-going} option: Continue as much as possible after an error. When an error occurs, dependencies are recalculated for remaining packages and any with unsatisfied dependencies are automatically dropped.
                        
                        \item \textbf{--autounmask-write y} option: If --autounmask is enabled, changes are written to config files, respecting CONFIG\_PROTECT and --ask. If the corresponding package.* is a file, the changes are appended to it, if it is a directory, changes are written to the lexicographically last file.
                        
                    \end{itemize}
                
                    \item \textbf{FEATURES} variable specifies options which affect how Portage operates and how packages are compiled. It has some predefined options, depending on what profile has been set, but this is an incremental variable, thus values can be added without directly overriding the default ones. \href{https://dev.gentoo.org/~zmedico/portage/doc/man/make.conf.5.html}{Man page of emerge all \textit{Feature} variables with explanation}
                    
\lstinputlisting[linerange={22-22}, firstnumber=22, language=LinuxConfigFiles]{sample_configs/make.conf_example}
                    
                    \begin{itemize}[label={o}]
                        \item \textbf{parallel-install} option: Use finer-grained locks when installing packages, allowing for greater parallelization. For additional parallelization.
                        
                        \item \textbf{multilib-strict} option: Many Makefiles assume that their libraries should go to /usr/lib, or \$(prefix)/lib. This assumption can cause a serious mess if /usr/lib isn't a symlink to /usr/lib64. To find the bad packages, we have a portage feature called multilib-strict. It will prevent emerge from putting 64bit libraries into anything other than (/usr)/lib64.
                        
                        \item \textbf{candy} Enable a special progress indicator when emerge calculates dependencies.
                        
                    \end{itemize}
                
                    \item \textbf{AUTOCLEAN} enables portage to automatically clean out older or overlapping packages from the system after every successful merge. This is the same as running 'emerge -c' after every merge. Set with: "yes" or "no", recommended "yes" since can cause serious problems due overlapping packages.
                    
\lstinputlisting[linerange={23-23}, firstnumber=23, language=LinuxConfigFiles]{sample_configs/make.conf_example}
                    
                    \item \textbf{CPU\_FLAGS\_X86} enables specific instructions for the architecture/cpu. \href{https://wiki.gentoo.org/wiki/CPU_FLAGS_X86}{More info}
                    
\lstinputlisting[linerange={24-24}, firstnumber=24, language=LinuxConfigFiles]{sample_configs/make.conf_example}
    
                        \paragraph{} The easiest way to obtain the flags is by using \textit{cpuinfo2cpuflags-x86}
         
\begin{lstlisting}[style=BashInputCHRoot]
 CHroot# emerge -v app-portage/cpuid2cpuflags && \
     cpuinfo2cpuflags-x86 >> /etc/portage/make.conf
\end{lstlisting}
                    
                    \item \textbf{PYTHON\_TARGETS} controls support for various Python implementations in packages. \href{https://wiki.gentoo.org/wiki/Project:Python/PYTHON_TARGETS}{More info}
                    
\lstinputlisting[linerange={25-25}, firstnumber=25, language=LinuxConfigFiles]{sample_configs/make.conf_example}
    
                    \item \textbf{VIDEO\_CARDS} sets the video drivers that you intend to use. Will talk about kernel configs later on. \href{https://wiki.gentoo.org/wiki/Xorg/Guide#make.conf}{More info}
                    
\lstinputlisting[linerange={27-27}, firstnumber=27, language=LinuxConfigFiles]{sample_configs/make.conf_example}
                    
                    \item \textbf{INTEL\_MODESETTING} sets the usage of GLAMOR to accelerate 2D graphical over Mesa. It is intel specific thing, since \textit{Intel DDX driver} has been slowly deprecating, it is recommend to use \textit{modesetting DDX driver}. \href{https://wiki.gentoo.org/wiki/Intel#Modesetting_DDX}{More info}
                    
\lstinputlisting[linerange={28-28}, firstnumber=28, language=LinuxConfigFiles]{sample_configs/make.conf_example}
                    
                    \item \textbf{INPUT\_DEVICES} sets drivers for input devices. Kernel configs are later. \href{https://wiki.gentoo.org/wiki/Evdev#Driver}{evdev is responsible for keyboards, mice, joysticks, etc...}. \href{https://wiki.gentoo.org/wiki/Synaptics#Driver}{synaptics is responsible for touchpads}
                    
\lstinputlisting[linerange={30-30}, firstnumber=30, language=LinuxConfigFiles]{sample_configs/make.conf_example}
                    
                    \item \textbf{L10N, LINGUAS} are localization variables. \textit{L10N} will replace the \textit{LINGUAS} in future, but for compatibility reasons should set them both for the moment. \href{https://wiki.gentoo.org/wiki/Localization/Guide#LINGUAS}{More info for LINGUAS} and \href{https://wiki.gentoo.org/wiki/Localization/Guide#L10N}{More info for L10N} and \href{https://www.gentoo.org/support/news-items/2016-06-23-l10n-use_expand.html}{More info about the replacement}
                    
\lstinputlisting[linerange={32-33}, firstnumber=32, language=LinuxConfigFiles]{sample_configs/make.conf_example}
                    
                    \item \textbf{SOUND} variable is to define use-flags related to sound. Its only entry is the necessary use flag for \href{https://wiki.gentoo.org/wiki/PulseAudio#Software}{\textit{PulseAudio} - sound server that provides a number of features on top of ALSA(most importantly - youtube with sound)} Kernel configs are for further. 
                    
\lstinputlisting[linerange={35-35}, firstnumber=35, language=LinuxConfigFiles]{sample_configs/make.conf_example}
                       
                    \item \textbf{NETWORK} variable is to define use-flags related to network. Its only entry is the necessary use flag for \href{https://wiki.gentoo.org/wiki/NetworkManager#Installation}{NetworkManager}. More on kernel config later on.
                    
\lstinputlisting[linerange={36-36}, firstnumber=36, language=LinuxConfigFiles]{sample_configs/make.conf_example}
    
                    \item \textbf{FONTS} variable is to define use-flags related to fonts config. \href{http://kev009.com/wp/2009/12/getting-beautiful-fonts-in-gentoo-linux/}{they are recommended from here}, although I am not following the full article any more. More info later on. 
                    
\lstinputlisting[linerange={37-37}, firstnumber=37, language=LinuxConfigFiles]{sample_configs/make.conf_example}
    
                    \item \textbf{GUI} variable to define use-flags related to GUI - such as gtk, qt and similar. In general I prefer qt over gtk, but above all I want all of them to look alike. Since my last installation I noticed that including both \textit{qt4} and \textit{qt5} I could not achieve that, but more details later.
                    
\lstinputlisting[linerange={38-38}, firstnumber=38, language=LinuxConfigFiles]{sample_configs/make.conf_example}
    
                    \item \textbf{MISC} misc use flags
                    
\lstinputlisting[linerange={39-39}, firstnumber=39, language=LinuxConfigFiles]{sample_configs/make.conf_example}
    
                    \item \textbf{USE} use variable is the keyword, which use flags. Since it permits the usage of variables I did so and the final result is
                    
\lstinputlisting[linerange={41-41}, firstnumber=41, language=LinuxConfigFiles]{sample_configs/make.conf_example}
                    
                    \item \textbf{GENTOO\_MIRRORS} is setting the mirrors. 
                    
\lstinputlisting[linerange={50-50}, firstnumber=50, language=LinuxConfigFiles]{sample_configs/make.conf_example}
                    
                        \paragraph{} Let \textit{mirrorselect} to do the job for you with the following command:
                    
\begin{lstlisting}[style=BashInputCHRoot]
 CHroot# emerge -v mirrorselect && \
     mirrorselect --servers 5
\end{lstlisting}            
        
                \end{itemize}
            
            \newpage
            \subsubsection{Configure timezone and locales}
            
                \begin{enumerate}
                    \item  \href{https://wiki.gentoo.org/wiki/Handbook:AMD64/Installation/Base#Timezone}{Timezone}
                    
                        \paragraph{} Available timezones are placed into \textit{/usr/share/zoneinfo/}, and you need to write them in the \textit{/etc/timezone} file and then you should reconfigure  sys-libs/timezone-data Lets say your capital is Sofia, so
                        
\begin{lstlisting}[style=BashInputCHRoot]
 CHroot# echo $(find /usr/share/zoneinfo/ -name "Sofia" \
         | cut -d"/" -f5-) \
         > /etc/timezone \
         && emerge -v sys-libs/timezone-data \
         && emerge --config sys-libs/timezone-data
\end{lstlisting}
                    
                    \newpage
                    \item   \href{https://wiki.gentoo.org/wiki/Handbook:AMD64/Installation/Base#Configure_locales}{Locals}
                    
                    \paragraph{} specify not only the language, but also what the rules are for sorting strings, displaying dates and times etc. Available combinations of locale are placed at \textit{/usr/share/i18n/SUPPORTED}, for my case I want to see combinations of \textit{bg}, so
                    
\begin{lstlisting}[style=BashInputCHRoot]
 CHroot# cat /usr/share/i18n/SUPPORTED | grep bg
 bg_BG.UTF-8 UTF-8
 bg_BG CP1251
\end{lstlisting}             
                    
                    \paragraph{} Now to specify wanted locals we shall edit \textit{/etc/locale.gen}. Add the ones we want, if missing, or comment/uncomment depending on our needs.
                    
\lstinputlisting[linerange={16-18,23-28}, firstnumber=16, language=LinuxConfigFiles]{sample_configs/locale.gen_example}
                    
                    \paragraph{} Last step is to generate the locals with
                    
\begin{lstlisting}[style=BashInputCHRoot]
 CHroot# locale-gen
\end{lstlisting}      
                    
                    \paragraph{} Finally lets set the system-wide locale. In near future will set link to a nice article about all those variables and why I chose \textit{C}

\begin{lstlisting}[style=BashInputCHRoot]
 CHroot# eselect locale list
 Available targets for the LANG variable:
 [1]   C
 [2]   POSIX
 [3]   bg_BG
 [4]   bg_BG.cp1251
 [5]   bg_BG.utf8
 [6]   en_US
 [7]   en_US.iso88591
 [8]   en_US.utf8
 CHroot# eselect locale set 1
\end{lstlisting}                        
                    
                \end{enumerate}

        \newpage
        \subsection{Kernel configuration}
            
            \paragraph{} Despite the method you choose run

\begin{lstlisting}[style=BashInputCHRoot]
 CHroot# emerge -va sys-kernel/gentoo-sources sys-kernel/linux-firmware
\end{lstlisting}
            
            \newpage 
            \subsubsection{Easy way - genkernel}
            
                \paragraph{} Alternative to manual configuration is using genkernel\href{https://wiki.gentoo.org/wiki/Handbook:AMD64/Installation/Kernel#Alternative:_Using_genkernel}{,click the here for more info.}
\begin{lstlisting}[style=BashInputCHRoot]
 CHroot# emerge -va sys-kernel/genkernel && genkernel all
\end{lstlisting}
                
                \paragraph{} This process should take a while and you are done with your kernel config.
                
            \newpage
            \subsubsection{Hard way - manual configuration}
                
                \paragraph{} Important note: I will not use modules since \href{https://wiki.gentoo.org/wiki/Kernel/Gentoo_Kernel_Configuration_Guide#Modules_do_not_get_loaded_automatically}{they make life harder.}
                
                \paragraph{} Manual configuration is much easier with \textit{lspci} which is included into \textit{pciutils}. This command will identify PCI-based and AGP-based hardware and help us to find the driver into the kernel.
                
\begin{lstlisting}[style=BashInputCHRoot]
 CHroot# emerge -va sys-apps/pciutils
\end{lstlisting}
                
                \paragraph{} Our first step is to see our hardware and drivers in use. Remember that I presume we are installing Gentoo using an live medium, thus I presume that most or even all the hardware is working. This means that the live usb has successfully recognized and loaded the modules we need to compile. To see which modules are in use and for which device we simply

                \begin{lstlisting}[style=BashInputRoot]
 root# lspci -k
 00:00.0 Host bridge: Intel Corporation Xeon E3-1200 v3/4th Gen Core Processor DRAM Controller (rev 06)
 Subsystem: Lenovo Xeon E3-1200 v3/4th Gen Core Processor DRAM Controller
 00:02.0 VGA compatible controller: Intel Corporation 4th Gen Core Processor Integrated Graphics Controller (rev 06)
 Subsystem: Lenovo 4th Gen Core Processor Integrated Graphics Controller
 Kernel driver in use: i915
 Kernel modules: i915
 00:03.0 Audio device: Intel Corporation Xeon E3-1200 v3/4th Gen Core Processor HD Audio Controller (rev 06)
 Subsystem: Lenovo Xeon E3-1200 v3/4th Gen Core Processor HD Audio Controller
 Kernel driver in use: snd_hda_intel
 Kernel modules: snd_hda_intel
 00:14.0 USB controller: Intel Corporation 8 Series/C220 Series Chipset Family USB xHCI (rev 04)
 Subsystem: Lenovo 8 Series/C220 Series Chipset Family USB xHCI
 Kernel driver in use: xhci_hcd
 Kernel modules: xhci_pci
 00:16.0 Communication controller: Intel Corporation 8 Series/C220 Series Chipset Family MEI Controller #1 (rev 04)
 Subsystem: Lenovo 8 Series/C220 Series Chipset Family MEI Controller
 00:1a.0 USB controller: Intel Corporation 8 Series/C220 Series Chipset Family USB EHCI #2 (rev 04)
 Subsystem: Lenovo 8 Series/C220 Series Chipset Family USB EHCI
 Kernel driver in use: ehci-pci
 00:1b.0 Audio device: Intel Corporation 8 Series/C220 Series Chipset High Definition Audio Controller (rev 04)
 Subsystem: Lenovo 8 Series/C220 Series Chipset High Definition Audio Controller
 Kernel driver in use: snd_hda_intel
 Kernel modules: snd_hda_intel
 00:1c.0 PCI bridge: Intel Corporation 8 Series/C220 Series Chipset Family PCI Express Root Port #1 (rev d4)
 Kernel driver in use: pcieport
 00:1c.2 PCI bridge: Intel Corporation 8 Series/C220 Series Chipset Family PCI Express Root Port #3 (rev d4)
 Kernel driver in use: pcieport
 00:1c.3 PCI bridge: Intel Corporation 8 Series/C220 Series Chipset Family PCI Express Root Port #4 (rev d4)
 Kernel driver in use: pcieport
 00:1c.4 PCI bridge: Intel Corporation 8 Series/C220 Series Chipset Family PCI Express Root Port #5 (rev d4)
 Kernel driver in use: pcieport
 00:1d.0 USB controller: Intel Corporation 8 Series/C220 Series Chipset Family USB EHCI #1 (rev 04)
 Subsystem: Lenovo 8 Series/C220 Series Chipset Family USB EHCI
 Kernel driver in use: ehci-pci
 00:1f.0 ISA bridge: Intel Corporation HM87 Express LPC Controller (rev 04)
 Subsystem: Lenovo HM87 Express LPC Controller
 Kernel driver in use: lpc_ich
 Kernel modules: lpc_ich
 00:1f.2 SATA controller: Intel Corporation 8 Series/C220 Series Chipset Family 6-port SATA Controller 1 [AHCI mode] (rev 04)
 Subsystem: Lenovo 8 Series/C220 Series Chipset Family 6-port SATA Controller 1 [AHCI mode]
 Kernel driver in use: ahci
 Kernel modules: ahci
 00:1f.3 SMBus: Intel Corporation 8 Series/C220 Series Chipset Family SMBus Controller (rev 04)
 Subsystem: Lenovo 8 Series/C220 Series Chipset Family SMBus Controller
 Kernel driver in use: i801_smbus
 Kernel modules: i2c_i801
 02:00.0 Unassigned class [ff00]: Realtek Semiconductor Co., Ltd. RTS5227 PCI Express Card Reader (rev 01)
 Subsystem: Lenovo RTS5227 PCI Express Card Reader
 03:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8111/8168/8411 PCI Express Gigabit Ethernet Controller (rev 10)
 Subsystem: Lenovo RTL8111/8168/8411 PCI Express Gigabit Ethernet Controller
 Kernel driver in use: r8169
 Kernel modules: r8169
 04:00.0 Network controller: Intel Corporation Wireless 7260 (rev 73)
 Subsystem: Intel Corporation Wireless-N 7260
 Kernel driver in use: iwlwifi
 Kernel modules: iwlwifi
                \end{lstlisting}
                
                \paragraph{} So lets make a list
                \begin{enumerate}
                    \item VGA compatible controller (video card) uses kernel module \textbf{i915}
                    \item Audio device, integrated HD Audio controller uses kernel module \textbf{snd\_hda\_intel}
                    \item USB controller: uses kernel modules\textbf{xhci\_pci}
                    \item PCI bridge: \textbf{pcieport}
                    \item isa bridge: \textbf{lpc\_ich}
                    \item sata controller: \textbf{ahci}
                    \item smbus: \textbf{i2c\_i801}
                    \item ethernet controller: \textbf{r8169}
                    \item network controller (wifi): \textbf{iwlwifi}
                \end{enumerate}
                
                \paragraph{} Now lets go to the kernel menu
                
                \begin{lstlisting}[style=BashInputCHRoot]
 CHroot# cd /usr/src/linux && make menuconfig
                \end{lstlisting}
                
                \paragraph{} If we want to search for any module/driver/config, we simply press \textbf{/} and type what we are searching. For example when we search for \textbf{i915}, we get something like
                
                \begin{lstlisting}[style=KernelConfig]
 Symbol: DRM_I915 [=y]
 Type: tristate
 Prompt: Intel8xx/9xx/G3x/G4x/HD Graphics
 Location:
     -> Device Drivers
         -> Graphics Support
 Defined at drivers/gpu/drm/i915/Kconfig:1
 Dpends on: HAS_IOMEM [=y] && DRM [=y] && X86 [=y] && PCI [=y]
 Slectts: INTEL_GTT [=y] && INTERVAL_TREE [=y] && SHMEM [=y] && TMPFS [=y] ...
                \end{lstlisting}
                
                \paragraph{} This tells us we can find the current driver under Device Drivers $ \rightarrow $ Graphics Support $ \rightarrow $ Intel8xx/9xx/G3x/G4x/HD Graphics and we can check for its presents in the current kernel(of the live medium) with:
                
                \begin{lstlisting}[style=BashInputRoot]
root# zcat /proc/config.gz | grep CONFIG_DRM_I915
 CONFIG_DRM_I915=m
 # CONFIG_DRM_I915_ALPHA_SUPPORT is not set
 CONFIG_DRM_I915_CAPTURE_ERROR=y
 CONFIG_DRM_I915_COMPRESS_ERROR=y
 CONFIG_DRM_I915_USERPTR=y
 # CONFIG_DRM_I915_GVT is not set
                \end{lstlisting}
                
                \paragraph{} I will try to include only the stuff which, should be checked, but not include the stuff which is checked by default, so a little mess and that is the problem with kernel configuration... In the future will think of a way to edit this... For now press \textit{h} and have petitions.
                
                \newpage
                \begin{enumerate}
                    \item \textbf{i915}
                    
                    \paragraph{} \href{https://wiki.gentoo.org/wiki/Intel#Kernel}{Lets not forget our guide}. We already saw that the location for that driver is at \textit{Device Drivers $ \rightarrow $ Graphics Support $ \rightarrow $ Intel8xx/9xx/G3x/G4x/HD Graphics} so we go there and check it 
                    
                    \begin{lstlisting}[style=KernelConfig]
 ...
 <*> /dev/agpgart (AGP Support)
     <*> Intel 440LX/BX/GX, I8xx and E7x05 chipset support
 ...
 (2)   Maximum number of GPUs
 ...
 <*> Direct Rendering Manager (XFree86 4.1.0 and higher DRI support)
     [*]   Enable legacy fbdev support for your modesetting driver (NEW)
     (100)   Overallocation of the fbdev buffer (NEW)
 ...
 <*> Intel 8xx/9xx/G3x/G4x/HD Graphics 
     [*] Enable capturing GPU state following a hang (NEW)
     [*]    Compress GPU error state (NEW)
     [*] Always enable userptr support (NEW) 
 ...
 <*> Backlight & LCD device support
     <*> Generic (aka Sharp Corgi) Backlight Driver (NEW)
 ...
 <*> VGA text console
     [*] Enable Scrollback Buffer in System RAM
     (64)    Scrollback Buffer Size (in KB) (NEW)
     (80) Initial number of console screen columns (NEW)
     (25) Initial number of console screen rows (NEW)
     -*- Framebuffer Console support
     -*-   Map the console to the primary display device
 ...
 <*> Bootup logo    
     [*]   Standard 224-color Linux logo (NEW)
 ...
                   \end{lstlisting}
                    
                   \newpage
                   \item \textbf{snd\_hda\_intel}
                   
                   \paragraph{} We will config the kernel for \href{https://wiki.gentoo.org/wiki/ALSA#Kernel}{\textit{alsa}}  and \href{https://wiki.gentoo.org/wiki/PulseAudio#Kernel}{\textit{pulseaudio}} simultaneously. Lets navigate to \textit{Device Drivers $ \rightarrow $ Sound card support $ \rightarrow $ Advanced Linux Sound Architecture} 
                   
                   \begin{lstlisting}[style=KernelConfig]
 ...
 [*]  PCI sound devices
 ...
 HD-Audio
     <*> HD Audio PCI
     <*> Build HDMI/DisplayPort HD-audio codec support
     <*> Build Conexant HD-audio codec support
 ...
 Advanced Linux Sound Architecture
     (2048) Pre-allocated buffer size for HD-audio driver

 # For microphone
     USB sound devices
         <*> USB Audio/MID driver
 ...
 # Should be already checked in
 General setup
     [*] System V IPC
                   \end{lstlisting}
                   
                   \newpage
                   \item \textbf{USB controllers}  \href{https://wiki.gentoo.org/wiki/USB/Guide#Config_options_for_the_kernel}{following this article}
                   
                   \begin{lstlisting}[style=KernelConfig]
 ...
 Device Drivers
     SCSI device support
         ---   SCSI support type (disk, tape, CD-ROM)
         <*>   SCSI disk support
 ...
 Device Drivers
     [*] USB support
         <*> xHCI HCD
         <*> EHCI HCD
         <*> OHCI HCD
         <*> UHCI HCD
         <*> USB printer support
         <*> SUB mass storage support
 ...
 Device Drivers
     HID support
         <*> Generic HID driver
 ...
 Device Drivers
     HID support
         Special HID drivers
             <*> Lenovov/Thinkpad devices  # since I have thikpad e440, all the rest are deselected
 ...
                   \end{lstlisting}
                   
                   \newpage
                   \item \textbf{pcieport} should be already set, and the other stuff I have no idea about :-)
                   
                   \begin{lstlisting}[style=KernelConfig]
 Symbol: PCIEPORTBUS [=y]
 Type: boolean
 Prompt: PCI Express Port Bus support
 Location:
     Bus options
         PCI support:
                   \end{lstlisting}
                   
                   \newpage
                   \item \textbf{lpc\_ich} was not set by default, so lets set it 
                   
                   \begin{lstlisting}[style=KernelConfig]
 Device Drivers
     Multifunction devices drivers
         <*> Intel ICH LPC
                   \end{lstlisting}
                   
                   \newpage
                   \item \textbf{ahci} is for the HDD, \href{https://wiki.gentoo.org/wiki/HDD#Kernel}{so lets follow this article} Since I have no idea, I will check all of what they have and leave the research for later.
                   
                   \begin{lstlisting}[style=KernelConfig]
 Device Drivers
     <*> Serial ATA and Parallel ATA drivers
     [*] ATA ACPI Support
 
 # If the drive is connected to a SATA Port Multiplier:
     [*] SATA Port Multiplier support
 
 # Select the driver for the SATA controller, e.g.:
     <*> AHCI SATA support (ahci)
 
 # If the drive is connected to an IDE controller:
     [*] ATA SFF support
     [*] ATA BMDMA support
 
 # Select the driver for the IDE controller, e.g.:
     <*> Intel ESB, ICH, PIIX3, PIIX4 PATA/SATA support (ata_piix)
 
 # SCSI device support  ---> 
     <*> SCSI device support
     <*> SCSI disk support 
                   \end{lstlisting}
                   
                   \newpage
                   \item \textbf{i2c\_i801} was enabled by default
                   \begin{lstlisting}[style=KernelConfig]
 Symbol: I2C_I801 [=y]
 Type: tristate
 Prompt: Intel 82801
 Location:
     Devie Drivers
         I2C support
             I2C support (I2C [=y])
                   \end{lstlisting}

                    \newpage
                    \item \textbf{r8169} \href{https://wiki.gentoo.org/wiki/Ethernet#Kernel}{will follow this article}
                    
                    \begin{lstlisting}[style=KernelConfig]
 Device Drivers
     Network device support
         Ethernet driver support
             [*] Realtek devices
                 <*> realtek 8169 PCI gigabit ethernet adapter
                    \end{lstlisting}
                    
                    \newpage
                    \item \textbf{iwlwifi} for the wifi controller and  \href{https://wiki.gentoo.org/wiki/Iwlwifi#Kernel}{follow this article} and \href{https://wiki.gentoo.org/wiki/Wifi#Kernel}{this} also according to \href{https://forums.gentoo.org/viewtopic-p-7640140.html#7640140}{this recommendation} I will set the drivers as modules.
                    
                    \begin{lstlisting}[style=KernelConfig]
 ...
 Networking support
     Wireless
         <*> cfg80211
             [*] enable ppowersave by default
             [*] cfg80211 wireless extensions compatibility
             <*> Generic IEEE 802.11 Networking Stack (mac80211)
             [*] Default rate control algorithm (Minstrel)
             -*-   Enable LED triggers
 ...
 Device Drivers
     Network device support
         Wireless LAN
             [*] Intel devices
                 <M>     Intel Wireless WiFi Next Gen AGN - Wireless-N/Advanced-N/Ultimate-N (iwlwifi)  
                 <M>      Intel Wireless WiFi DVM Firmware support
                 <M>      Intel Wireless WiFi MVM Firmware support
 ...
                  
                    \end{lstlisting}
                    
                \end{enumerate}
                
                \newpage
                \paragraph{} Now lets check if the minimum required options are set \href{https://wiki.gentoo.org/wiki/Handbook:AMD64/Installation/Kernel#Activating_required_options}{following this guide}
                
                \paragraph{} Enable filesystems
                
                \begin{lstlisting}[style=KernelConfig]
 File systems
     <*> second extended fs support
     <*> ext3 fs support
     <*> ext4 fs support
     DOS/FAT/NT fylesystems
         <*> MSDOS fs support
         <*> VFAT fs support
         [*] Enable utf-8 option by default
         <*> NTFS file system support
         [*] 	debugging
         []		writing
                \end{lstlisting}
                
                \newpage 
                \paragraph{} Enable ppp
                
                \begin{lstlisting}[style=KernelConfig]
 Device drivers
     Network device support
         <*> PPP support
             <*> PPP for async
             <*> PPP for tty 
                \end{lstlisting}
                
                \newpage
                \paragraph{} Little twiks on the processor following \href{https://wiki.gentoo.org/wiki/Kernel/Gentoo_Kernel_Configuration_Guide#Multiprocessor.2C_Hyper-Threading_and_multi-core_systems}{this guide} and those \href{https://forums.gentoo.org/viewtopic-t-939150-start-0.html}{notes}
                
                \begin{lstlisting}[style=KernelConfig]
 Processor type and features
     [*] Symmetric multi processing support
     [*] SMT (Hyperthreading) scheduler support
     [*] Multi-core scheduler support
     Processor family (Core 2/newer Xeon)
                \end{lstlisting}
                
                \newpage
                \paragraph{} After all the work lets compile. 
                
                \begin{lstlisting}[style=BashInputCHRoot]
 CHroot# make -j4 && make modules_install && make install
                \end{lstlisting}
             
            \newpage
            \subsection{Final touches}

                \paragraph{} Host information
                \begin{lstlisting}[style=BashInputCHRoot]
 CHroot# nano -w /etc/conf.d/hostname
 # Set the hostname variable to the selected host name
 hostname="kaktus"
                \end{lstlisting}
                
                \paragraph{} Domain information, in my case no domain should be configured, so to get rid of "This is hostname.(none)" messages at their login screen. This should then be fixed by editing /etc/issue and deleting the string .\O from that file.
                \begin{lstlisting}[style=BashInputCHRoot]
 CHroot# nano -w /etc/issue
 # to look like this
 This is \n (\s \m \r) \t
                \end{lstlisting}
                
                \paragraph{} Set 
                
                
                
                

                
\end{document}
